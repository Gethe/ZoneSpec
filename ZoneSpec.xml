<Ui xmlns="http://www.blizzard.com/wow/ui/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.blizzard.com/wow/ui/
..\..\FrameXML\UI.xsd">
	<Script file="ZoneSpec.lua"/>

	<Button name="ZSIconTemplate" virtual="true">
		<Size x="32" y="32" />
		<Layers>
			<Layer level="BACKGROUND">
				<Texture parentKey="texture" setAllPoints="true" file="Interface\Icons\INV_Misc_QuestionMark">
				</Texture>
			</Layer>
		</Layers>
		<Scripts>
			<OnEnter>
				if ( self.spellID ) then
					GameTooltip:SetOwner(self, "ANCHOR_RIGHT");
					GameTooltip:SetSpellByID(self.spellID, false, false, true);
					if ( self.extraTooltip ) then
						GameTooltip:AddLine(self.extraTooltip);
					end
					GameTooltip:Show();
				elseif ( self.ID ) then
					GameTooltip:SetOwner(self, "ANCHOR_RIGHT");
					GameTooltip:SetTalent(self.ID);
					if ( self.extraTooltip ) then
						GameTooltip:AddLine(self.extraTooltip);
					end
					GameTooltip:Show();
				end
			</OnEnter>
			<OnLeave>
				GameTooltip_Hide();
			</OnLeave>
		</Scripts>
	</Button>

	<Frame name="ZSFrame" parent="UIParent" moveable="true" enablemouse="true">
		<Size x="200" y="64" />
		<Frames>
			<Button parentKey="anchor" hidden="false" inherits="ChatConfigTabTemplate">
			</Button>

		<!-- Talent Icons -->
			<Button parentKey="talent1" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.anchor" relativePoint="BOTTOMLEFT" x="4" y="-1" />
				</Anchors>
			</Button>
			<Button parentKey="talent2" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.talent1" relativePoint="TOPRIGHT" x="1" y="0" />
				</Anchors>
			</Button>
			<Button parentKey="talent3" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.talent2" relativePoint="TOPRIGHT" x="1" y="0" />
				</Anchors>
			</Button>
			<Button parentKey="talent4" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.talent3" relativePoint="TOPRIGHT" x="1" y="0" />
				</Anchors>
			</Button>
			<Button parentKey="talent5" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.talent4" relativePoint="TOPRIGHT" x="1" y="0" />
				</Anchors>
			</Button>
			<Button parentKey="talent6" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.talent5" relativePoint="TOPRIGHT" x="1" y="0" />
				</Anchors>
			</Button>

		<!-- Glyph Icons -->
			<Button parentKey="glyph2" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.talent1" relativePoint="BOTTOMLEFT" x="0" y="-1" />
				</Anchors>
			</Button>
			<Button parentKey="glyph4" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.glyph2" relativePoint="TOPRIGHT" x="1" y="0" />
				</Anchors>
			</Button>
			<Button parentKey="glyph6" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPLEFT" relativeKey="$parent.glyph4" relativePoint="TOPRIGHT" x="1" y="0" />
				</Anchors>
			</Button>

		<!-- Reagent Counter -->
			<Button parentKey="reagent" inherits="ZSIconTemplate">
				<Anchors>
					<Anchor point="TOPRIGHT" relativeKey="$parent.talent1" relativePoint="TOPLEFT" x="-1" y="0" />
				</Anchors>
				<ButtonText parentKey="text"/>
				<NormalFont style="NumberFontNormal"/>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad function="ZoneSpec_OnLoad" />
			<OnEnter>
				print(ZoneSpec.db.isMovable)
				if ZoneSpec.db.isMovable then
					--printDebug("Config tooltip")
					GameTooltip:ClearAllPoints()
					GameTooltip:SetOwner(self, "ANCHOR_CURSOR", 0 ,0)
					GameTooltip:SetText( 'Drag to move frame.\nUse "\/zs toggle" to lock placement.' )
					--printDebug("Show tooltip")
					GameTooltip:Show()
				end
			</OnEnter>
			<OnLeave>
				GameTooltip:Hide()
			</OnLeave>
			<OnDragStart>
				if ZoneSpec.db.isMovable then
					self:StartMoving()
				end
			</OnDragStart>
			<OnDragStop>
				self:StopMovingOrSizing()
				local point, relativeTo, relativePoint, xOfs, yOfs = self:GetPoint()
				--printDebug(point, relativeTo, relativePoint, xOfs, yOfs)
				ZoneSpec.db.point = point
				ZoneSpec.db.xOfs = xOfs
				ZoneSpec.db.yOfs = yOfs
			</OnDragStop>
		</Scripts>
	</Frame>
</Ui>
